<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<script>
    var data = [
      {
        "page":1,
        "size":10,
        "id":1041,
        "parentId":1001,
        "channelNo":null,
        "channelName":"四级四级",
        "channelSec":"5c5cc172d415bbce8a9479a6c914c3ae",
        "channelStatus":1,
        "remark":null,
        "parentChannelNo":null,
        "rootChannelNo":null,
        "channelLevel":4,
        "subChannels":null,
        "gmtCreate":null,
        "gmtModify":null,
        "createdBy":null,
        "updatedBy":null
      },
      {
        "page":1,
        "size":10,
        "id":1031,
        "parentId":1001,
        "channelNo":null,
        "channelName":"四级",
        "channelSec":"b11e3aaf2e8e9f30a714bda3e3500206",
        "channelStatus":1,
        "remark":null,
        "parentChannelNo":null,
        "rootChannelNo":null,
        "channelLevel":4,
        "subChannels":null,
        "gmtCreate":null,
        "gmtModify":null,
        "createdBy":null,
        "updatedBy":null
      },
      {
        "page":1,
        "size":10,
        "id":1021,
        "parentId":1001,
        "channelNo":null,
        "channelName":"大方设计",
        "channelSec":"44e828d6650a16af8bd188fb3483462c",
        "channelStatus":1,
        "remark":null,
        "parentChannelNo":null,
        "rootChannelNo":null,
        "channelLevel":4,
        "subChannels":null,
        "gmtCreate":null,
        "gmtModify":null,
        "createdBy":null,
        "updatedBy":null
      },
      {
        "page":1,
        "size":10,
        "id":1011,
        "parentId":1001,
        "channelNo":"JFB0000012",
        "channelName":"ox四级渠道",
        "channelSec":"9f00dae1504cc2a28d29cd6675129c7f",
        "channelStatus":1,
        "remark":null,
        "parentChannelNo":null,
        "rootChannelNo":null,
        "channelLevel":4,
        "subChannels":null,
        "gmtCreate":null,
        "gmtModify":null,
        "createdBy":null,
        "updatedBy":null
      },
      {
        "page":1,
        "size":10,
        "id":1001,
        "parentId":991,
        "channelNo":"JFB0000011",
        "channelName":"ox三级渠道",
        "channelSec":"9df18ce648814f624770e0167cd9305f",
        "channelStatus":1,
        "remark":null,
        "parentChannelNo":null,
        "rootChannelNo":null,
        "channelLevel":3,
        "subChannels":[
          {
            "page":1,
            "size":10,
            "id":1011,
            "parentId":1001,
            "channelNo":"JFB0000012",
            "channelName":"ox四级渠道",
            "channelSec":"9f00dae1504cc2a28d29cd6675129c7f",
            "channelStatus":1,
            "remark":null,
            "parentChannelNo":"JFB0000011",
            "rootChannelNo":"JFB0000001",
            "channelLevel":4,
            "subChannels":null,
            "gmtCreate":null,
            "gmtModify":null,
            "createdBy":null,
            "updatedBy":null
          },
          {
            "page":1,
            "size":10,
            "id":1021,
            "parentId":1001,
            "channelNo":null,
            "channelName":"大方设计",
            "channelSec":"44e828d6650a16af8bd188fb3483462c",
            "channelStatus":1,
            "remark":null,
            "parentChannelNo":"JFB0000011",
            "rootChannelNo":"JFB0000001",
            "channelLevel":4,
            "subChannels":null,
            "gmtCreate":null,
            "gmtModify":null,
            "createdBy":null,
            "updatedBy":null
          },
          {
            "page":1,
            "size":10,
            "id":1031,
            "parentId":1001,
            "channelNo":null,
            "channelName":"四级",
            "channelSec":"b11e3aaf2e8e9f30a714bda3e3500206",
            "channelStatus":1,
            "remark":null,
            "parentChannelNo":"JFB0000011",
            "rootChannelNo":"JFB0000001",
            "channelLevel":4,
            "subChannels":null,
            "gmtCreate":null,
            "gmtModify":null,
            "createdBy":null,
            "updatedBy":null
          },
          {
            "page":1,
            "size":10,
            "id":1041,
            "parentId":1001,
            "channelNo":null,
            "channelName":"四级四级",
            "channelSec":"5c5cc172d415bbce8a9479a6c914c3ae",
            "channelStatus":1,
            "remark":null,
            "parentChannelNo":"JFB0000011",
            "rootChannelNo":"JFB0000001",
            "channelLevel":4,
            "subChannels":null,
            "gmtCreate":null,
            "gmtModify":null,
            "createdBy":null,
            "updatedBy":null
          }
        ],
        "gmtCreate":null,
        "gmtModify":null,
        "createdBy":null,
        "updatedBy":null
      },
      {
        "page":1,
        "size":10,
        "id":991,
        "parentId":871,
        "channelNo":"JFB0000010",
        "channelName":"ox二级渠道",
        "channelSec":"e600a70bbc0688e25efbb4a5be1a5b05",
        "channelStatus":1,
        "remark":null,
        "parentChannelNo":null,
        "rootChannelNo":null,
        "channelLevel":2,
        "subChannels":[
          {
            "page":1,
            "size":10,
            "id":1001,
            "parentId":991,
            "channelNo":"JFB0000011",
            "channelName":"ox三级渠道",
            "channelSec":"9df18ce648814f624770e0167cd9305f",
            "channelStatus":1,
            "remark":null,
            "parentChannelNo":"JFB0000010",
            "rootChannelNo":"JFB0000001",
            "channelLevel":3,
            "subChannels":[
              {
                "page":1,
                "size":10,
                "id":1011,
                "parentId":1001,
                "channelNo":"JFB0000012",
                "channelName":"ox四级渠道",
                "channelSec":"9f00dae1504cc2a28d29cd6675129c7f",
                "channelStatus":1,
                "remark":null,
                "parentChannelNo":"JFB0000011",
                "rootChannelNo":"JFB0000001",
                "channelLevel":4,
                "subChannels":null,
                "gmtCreate":null,
                "gmtModify":null,
                "createdBy":null,
                "updatedBy":null
              },
              {
                "page":1,
                "size":10,
                "id":1021,
                "parentId":1001,
                "channelNo":null,
                "channelName":"大方设计",
                "channelSec":"44e828d6650a16af8bd188fb3483462c",
                "channelStatus":1,
                "remark":null,
                "parentChannelNo":"JFB0000011",
                "rootChannelNo":"JFB0000001",
                "channelLevel":4,
                "subChannels":null,
                "gmtCreate":null,
                "gmtModify":null,
                "createdBy":null,
                "updatedBy":null
              },
              {
                "page":1,
                "size":10,
                "id":1031,
                "parentId":1001,
                "channelNo":null,
                "channelName":"四级",
                "channelSec":"b11e3aaf2e8e9f30a714bda3e3500206",
                "channelStatus":1,
                "remark":null,
                "parentChannelNo":"JFB0000011",
                "rootChannelNo":"JFB0000001",
                "channelLevel":4,
                "subChannels":null,
                "gmtCreate":null,
                "gmtModify":null,
                "createdBy":null,
                "updatedBy":null
              },
              {
                "page":1,
                "size":10,
                "id":1041,
                "parentId":1001,
                "channelNo":null,
                "channelName":"四级四级",
                "channelSec":"5c5cc172d415bbce8a9479a6c914c3ae",
                "channelStatus":1,
                "remark":null,
                "parentChannelNo":"JFB0000011",
                "rootChannelNo":"JFB0000001",
                "channelLevel":4,
                "subChannels":null,
                "gmtCreate":null,
                "gmtModify":null,
                "createdBy":null,
                "updatedBy":null
              }
            ],
            "gmtCreate":null,
            "gmtModify":null,
            "createdBy":null,
            "updatedBy":null
          }
        ],
        "gmtCreate":null,
        "gmtModify":null,
        "createdBy":null,
        "updatedBy":null
      },
      {
        "page":1,
        "size":10,
        "id":961,
        "parentId":0,
        "channelNo":"JFB0000007",
        "channelName":"testchannel",
        "channelSec":"3cad791de7aab34ea91e839fd3d0ca91",
        "channelStatus":1,
        "remark":null,
        "parentChannelNo":null,
        "rootChannelNo":null,
        "channelLevel":1,
        "subChannels":null,
        "gmtCreate":null,
        "gmtModify":null,
        "createdBy":null,
        "updatedBy":null
      },
      {
        "page":1,
        "size":10,
        "id":951,
        "parentId":0,
        "channelNo":"JFB0000006",
        "channelName":null,
        "channelSec":"5e9359741909b2b00f2a4faf10a54f1e",
        "channelStatus":1,
        "remark":null,
        "parentChannelNo":null,
        "rootChannelNo":null,
        "channelLevel":1,
        "subChannels":null,
        "gmtCreate":null,
        "gmtModify":null,
        "createdBy":null,
        "updatedBy":null
      },
      {
        "page":1,
        "size":10,
        "id":931,
        "parentId":0,
        "channelNo":"JFB0000005",
        "channelName":"cc",
        "channelSec":"647e60e2d545a8772cb621fb1bce49ac",
        "channelStatus":1,
        "remark":null,
        "parentChannelNo":null,
        "rootChannelNo":null,
        "channelLevel":1,
        "subChannels":null,
        "gmtCreate":null,
        "gmtModify":null,
        "createdBy":null,
        "updatedBy":null
      },
      {
        "page":1,
        "size":10,
        "id":901,
        "parentId":0,
        "channelNo":"JFB0000004",
        "channelName":"ffff",
        "channelSec":"249c4642c6d1e0f60cbacaf0e0bc3cc7",
        "channelStatus":1,
        "remark":null,
        "parentChannelNo":null,
        "rootChannelNo":null,
        "channelLevel":1,
        "subChannels":null,
        "gmtCreate":null,
        "gmtModify":null,
        "createdBy":null,
        "updatedBy":null
      }
    ]
    function createTreeData(list){
      return list.map(({subChannels , id , ...item}) => {
        if (subChannels && subChannels.length>0) {
          return { ...item, id, key:id, subChannels , children: createTreeData(subChannels) }
        } else {
          return { ...item, key:id, id}
        }
      })
    }
    const newData = createTreeData(data);
    function createData(data) {
      var result1 = JSON.parse(JSON.stringify(data));
      for (var i=0;i<result1.length;i++) {
        var flag1 = i+'';
        var current1 = result1[i];
        current1.flag = flag1;
        var result2 = current1.children;
        if ( result2 ) {
          for (var j=0;j<result2.length;j++) {
            var flag2 = i + '-' + j;
            var current2 = result2[j];
            current2.flag = flag2;
            var result3 = current2.children;
            if ( result3 ) {
              for (var k=0;k<result3.length;k++) {
                var flag3 = i + '-' + j + '-' + k;
                var current3 = result3[k];
                current3.flag = flag3;
                var result4 = current3.children;
                if ( result4 ) {
                  for ( var l=0;l<result4.length;l++ ) {
                    var flag4 = i + '-' + j + '-' + k + '-' + l;
                    var current4 = result4[l];
                    current4.flag = flag4;
                  }
                }
              }
            }
          }
        }
      }
      return result1;
    }
    // const newResult = createData(newData);
    // console.log(newResult);
    function factorial(n, result) {
      if (result) {
        result.forEach((v,i)=>{
          v.flag = n?(n+'-'+i):(n+i);
          factorial(v.flag,v.children)
        })
      }
      return result;
    }
    console.log('Result: ', JSON.stringify(factorial('', newData)));
    const newResult = createData(newData);
    console.log('newResult: ', JSON.stringify(newResult));
    console.log('newResult: ', JSON.stringify(newResult)==JSON.stringify(factorial('', newData)));

</script>
</body>
</html>
